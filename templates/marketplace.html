<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WasteWise - Marketplace</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    
    <style>
        /* General Layout */
        main {
            padding: 40px 20px;
            min-height: 80vh;
            display: flex;
            gap: 30px;
        }

        .product-listing {
            flex-grow: 1;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        /* Product Card Styling */
        .product-card {
            background-color: #1a1a1a;
            border: 1px solid #4caf50; /* Green border from your style */
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.4);
        }

        .product-card h3 {
            color: #fff;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .product-card .price {
            font-size: 1.2rem;
            color: #4caf50;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 15px;
            border: 1px solid #4caf50;
        }

        /* Cart and Checkout Sidebar */
        .sidebar {
            width: 350px;
            background-color: #121212;
            border: 1px solid rgba(76, 175, 80, 0.5);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            position: sticky;
            top: 100px; 
            align-self: flex-start;
        }

        .sidebar h2 {
            color: #4caf50;
            border-bottom: 2px solid #4caf50;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        #cart-items {
            list-style: none;
            padding: 0;
            margin-bottom: 20px;
        }

        #cart-items li {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed #333;
            font-size: 0.95rem;
        }
        
        #cart-items li:last-child {
            border-bottom: none;
        }

        #cart-total {
            font-size: 1.2rem;
            font-weight: 700;
            color: #fff;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #333;
            display: flex;
            justify-content: space-between;
        }

        /* Checkout Form Styling */
        #checkout-form-container {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(76, 175, 80, 0.3);
        }

        .checkout-form label {
            display: block;
            margin-top: 15px;
            margin-bottom: 5px;
            color: #ccc;
        }

        .checkout-form input[type="text"],
        .checkout-form textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #4caf50;
            border-radius: 4px;
            background-color: #0a0e0a;
            color: #fff;
            font-family: inherit;
        }

        .btn-checkout {
            width: 100%;
            margin-top: 15px;
        }

        .btn-add-cart {
            background-color: #4caf50;
            color: #0a0e0a;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: 600;
        }
        
        .btn-add-cart:hover {
            background-color: #66bb6a;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-glow-line"></div>
        <div class="nav-container">
            <div class="logo">
                <svg class="logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#4caf50;stop-opacity:1"/>
                            <stop offset="100%" style="stop-color:#2e7d32;stop-opacity:1"/>
                        </linearGradient>
                    </defs>
                    <path d="M50 10 L65 25 L60 25 L60 45 L70 45 L70 40 L85 55 L70 70 L70 65 L60 65 L60 85 L65 85 L50 100 L35 85 L40 85 L40 65 L30 65 L30 70 L15 55 L30 40 L30 45 L40 45 L40 25 L35 25 Z" 
                          fill="url(#logoGradient)"/>
                </svg>
                WasteWise
            </div>
            <div class="nav-links-container">
                <a href="{{ url_for('home') }}" class="nav-link">Home</a>
                <a href="/marketplace" class="nav-link active">Marketplace</a>
            </div>
            <div class="nav-cta">
                <button class="btn btn-primary">Sign In</button>
            </div>
        </div>
    </nav>

    <main class="container">
        <section class="product-listing">
            <h2>Products from Waste: Upcycled & Sustainable</h2>
            
            <div class="product-card">
                <img src="https://via.placeholder.com/300x200/4caf50/0a0e0a?text=Upcycled+Tire+Planter" alt="Planter made from old tire">
                <h3>Upcycled Tire Planter</h3>
                <p>A durable, stylish planter made from reclaimed car tires. Perfect for your garden or balcony.</p>
                <div class="price">$25.00</div>
                <button class="btn-add-cart" onclick="addToCart('Upcycled Tire Planter', 25.00)">Add to Cart</button>
            </div>

            <div class="product-card">
                <img src="https://via.placeholder.com/300x200/4caf50/0a0e0a?text=Recycled+Glass+Lamp" alt="Lamp made from a glass bottle">
                <h3>Recycled Glass Bottle Lamp</h3>
                <p>An elegant mood lamp crafted from a discarded glass bottle. Unique design for any space.</p>
                <div class="price">$45.50</div>
                <button class="btn-add-cart" onclick="addToCart('Recycled Glass Bottle Lamp', 45.50)">Add to Cart</button>
            </div>
            
            <div class="product-card">
                <img src="https://via.placeholder.com/300x200/4caf50/0a0e0a?text=Plastic+Bottle+Wallet" alt="Wallet made from plastic bottles">
                <h3>Plastic Bottle Wallet</h3>
                <p>A water-resistant, ultra-light wallet made from recycled PET plastic bottles.</p>
                <div class="price">$15.00</div>
                <button class="btn-add-cart" onclick="addToCart('Plastic Bottle Wallet', 15.00)">Add to Cart</button>
            </div>
            
            <div class="product-card">
                <img src="https://via.placeholder.com/300x200/4caf50/0a0e0a?text=Newspaper+Pencils" alt="Pencils made from rolled newspaper">
                <h3>Recycled Newspaper Pencils (Set of 10)</h3>
                <p>Pencils made by tightly rolling and gluing recycled newspaper. Eco-friendly writing!</p>
                <div class="price">$8.99</div>
                <button class="btn-add-cart" onclick="addToCart('Recycled Newspaper Pencils', 8.99)">Add to Cart</button>
            </div>
            
        </section>

        <aside class="sidebar">
            <h2>üõçÔ∏è Your Cart</h2>
            <ul id="cart-items">
                </ul>
            <div id="cart-total">
                <span>Total:</span>
                <span id="total-price">$0.00</span>
            </div>

            <button id="checkout-btn" class="btn btn-primary btn-checkout" onclick="toggleCheckout(true)" disabled>Proceed to Checkout</button>

            <div id="checkout-form-container" style="display: none;">
                <h3>Enter Details</h3>
                <form id="checkout-form" class="checkout-form">
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" required>

                    <label for="address">Address:</label>
                    <textarea id="address" name="address" rows="3" required></textarea>

                    <label for="mobile">Mobile No.:</label>
                    <input type="text" id="mobile" name="mobile" pattern="[0-9]{10,15}" title="Please enter a valid mobile number (10-15 digits)" required>

                    <button type="submit" class="btn-add-cart btn-checkout">Place Order</button>
                </form>
            </div>
        </aside>
    </main>

    <footer class="footer">
        <div class="container footer-content">
            <div class="footer-section">
                <h3>WasteWise</h3>
                <p>Transforming waste management through innovation and community collaboration.</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="/marketplace">Marketplace</a></li>
                    <li><a href="/wastebot">WasteWise Bot</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Contact</h4>
                <p>Email: support@wastewise.com</p>
                <p>Phone: +91 123 456 7890</p>
            </div>
        </div>
    </footer>
    
    <script src="{{ url_for('static', filename='marketplace.js') }}"></script>
</body>
</html>